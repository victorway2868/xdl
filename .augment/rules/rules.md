---
type: "manual"
---

一、完成开发/修复功能后按规则总结
1. 变更要点

功能修复描述：
简要描述本次修复或新增功能的目标和目的。解释为何要进行此修复或开发，并概括解决的核心问题。

关键修改点：

例如：新增某个异步操作、修改登录流程、修复内存泄漏等。

如果是修复，简要描述修复的Bug或问题。

示例：

修复了登录流程，确保用户登录后正确刷新 Cookie，避免页面显示旧的用户信息。

新增了文件上传功能，支持拖拽上传并显示上传进度。

2. 涉及文件和模块

列出所有与本次开发或修复相关的文件、模块、类或方法，并简要描述每个文件的作用和主要变更内容。

格式：

文件路径：描述修改内容和变更点。

新增/修改的函数或方法：简要描述功能。

示例：

src/renderer/components/LoginButton.tsx

修改了登录按钮的点击事件，点击后弹出登录方式选择框。

新增 handleWebLogin 和 handleCompanionLogin 方法，分别处理抖音网页登录和直播伴侣登录。

src/renderer/store/features/user/userSlice.ts

新增 loginWithDouyinWeb 和 loginWithDouyinCompanion 异步动作，处理不同的登录方式。

修改 extraReducers，在 fulfilled 状态下更新用户信息。

src/main/modules/douyinWebLogin.ts

修改了登录模块，确保在抖音网页登录后成功提取用户的 Cookie，并更新本地存储。

3. 逻辑说明

核心逻辑：
简要说明功能修复或新增时的核心逻辑及工作流程，帮助其他团队成员理解整个功能是如何工作的。

例如：如何进行 Cookie 保存与读取，如何实现异步操作等。

关键点：
强调涉及到的复杂逻辑或流程，如并发控制、状态管理、UI 更新等。

示例：

登录按钮的点击事件会触发 LoginModal 弹窗，用户可以选择使用“抖音网页登录”或“抖音直播伴侣”进行登录。

选择登录方式后，分别触发对应的异步操作 (loginWithDouyinWeb 或 loginWithDouyinCompanion) 获取 Cookie 并更新用户信息。

成功登录后，使用 Redux 的 dispatch 更新全局用户状态，UI 随之更新。

4. 验证方法

功能验证步骤：
列出详细的验证步骤，帮助测试人员验证开发/修复的功能是否符合要求。

预期结果：
确保每个步骤的预期行为清晰明确，且能够验证开发的功能是否达到设计目标。

示例：

启动应用，进入主页，点击“登录平台”按钮。

选择“抖音网页登录”或“抖音直播伴侣”进行登录。

登录成功后，UI 中的用户信息区域应该显示新的用户昵称、头像、粉丝数等信息。

再次点击“登录平台”并选择另一种登录方式，确保页面信息刷新为新的登录用户数据。